<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Data classes and functions">

<title>Data – bioMONAI</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Data – bioMONAI">
<meta property="og:description" content="Data classes and functions">
<meta property="og:site_name" content="bioMONAI">
<meta name="twitter:title" content="Data – bioMONAI">
<meta name="twitter:description" content="Data classes and functions">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">bioMONAI</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://deepclem.github.io"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="https://monai.io/"><i class="bi bi-link" role="img">
</i> 
 <span class="dropdown-text">monai</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://docs.fast.ai"><i class="bi bi-link" role="img">
</i> 
 <span class="dropdown-text">fast.ai</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://fastcore.fast.ai"><i class="bi bi-link" role="img">
</i> 
 <span class="dropdown-text">fastcore</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://fastxtend.benjaminwarner.dev"><i class="bi bi-link" role="img">
</i> 
 <span class="dropdown-text">fastxtend</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://nbdev.fast.ai"><i class="bi bi-link" role="img">
</i> 
 <span class="dropdown-text">nbdev</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/deepCLEM/bioMONAI/issues"><i class="bi bi-bug" role="img">
</i> 
 <span class="dropdown-text">Report an Issue</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/deepCLEM/bioMONAI/"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/"> <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html">Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">bioMONAI</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./io.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I/O</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./losses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loss functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Networks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transforms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metrics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./callbacks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Callbacks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualize</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Tutorials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Tutorials/tutorial_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Image Classification 2D</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Tutorials/tutorial_classification3d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Image Classification 3D</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Tutorials/tutorial_denoising.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Denoising</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Tutorials/tutorial_multispectral_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multispectral Classification</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-types" id="toc-data-types" class="nav-link active" data-scroll-target="#data-types">Data types</a>
  <ul>
  <li><a href="#metaresolver" id="toc-metaresolver" class="nav-link" data-scroll-target="#metaresolver">MetaResolver</a></li>
  <li><a href="#bioimagebase" id="toc-bioimagebase" class="nav-link" data-scroll-target="#bioimagebase">BioImageBase</a></li>
  <li><a href="#bioimage" id="toc-bioimage" class="nav-link" data-scroll-target="#bioimage">BioImage</a></li>
  <li><a href="#bioimagestack" id="toc-bioimagestack" class="nav-link" data-scroll-target="#bioimagestack">BioImageStack</a></li>
  <li><a href="#bioimageproject" id="toc-bioimageproject" class="nav-link" data-scroll-target="#bioimageproject">BioImageProject</a></li>
  <li><a href="#bioimagemulti" id="toc-bioimagemulti" class="nav-link" data-scroll-target="#bioimagemulti">BioImageMulti</a></li>
  </ul></li>
  <li><a href="#data-conversion" id="toc-data-conversion" class="nav-link" data-scroll-target="#data-conversion">Data conversion</a>
  <ul>
  <li><a href="#tensor2bioimage" id="toc-tensor2bioimage" class="nav-link" data-scroll-target="#tensor2bioimage">Tensor2BioImage</a></li>
  </ul></li>
  <li><a href="#data-blocks-and-dataloader" id="toc-data-blocks-and-dataloader" class="nav-link" data-scroll-target="#data-blocks-and-dataloader">Data Blocks and Dataloader</a>
  <ul>
  <li><a href="#bioimageblock" id="toc-bioimageblock" class="nav-link" data-scroll-target="#bioimageblock">BioImageBlock</a></li>
  <li><a href="#biodatablock" id="toc-biodatablock" class="nav-link" data-scroll-target="#biodatablock">BioDataBlock</a></li>
  <li><a href="#biodataloaders" id="toc-biodataloaders" class="nav-link" data-scroll-target="#biodataloaders">BioDataLoaders</a></li>
  <li><a href="#biodataloaders.from_source" id="toc-biodataloaders.from_source" class="nav-link" data-scroll-target="#biodataloaders.from_source">BioDataLoaders.from_source</a></li>
  <li><a href="#biodataloaders.from_folder" id="toc-biodataloaders.from_folder" class="nav-link" data-scroll-target="#biodataloaders.from_folder">BioDataLoaders.from_folder</a></li>
  <li><a href="#biodataloaders.from_df" id="toc-biodataloaders.from_df" class="nav-link" data-scroll-target="#biodataloaders.from_df">BioDataLoaders.from_df</a></li>
  <li><a href="#biodataloaders.from_csv" id="toc-biodataloaders.from_csv" class="nav-link" data-scroll-target="#biodataloaders.from_csv">BioDataLoaders.from_csv</a></li>
  <li><a href="#biodataloaders.class_from_folder" id="toc-biodataloaders.class_from_folder" class="nav-link" data-scroll-target="#biodataloaders.class_from_folder">BioDataLoaders.class_from_folder</a></li>
  <li><a href="#biodataloaders.class_from_df" id="toc-biodataloaders.class_from_df" class="nav-link" data-scroll-target="#biodataloaders.class_from_df">BioDataLoaders.class_from_df</a></li>
  <li><a href="#biodataloaders.class_from_csv" id="toc-biodataloaders.class_from_csv" class="nav-link" data-scroll-target="#biodataloaders.class_from_csv">BioDataLoaders.class_from_csv</a></li>
  <li><a href="#biodataloaders.class_from_lists" id="toc-biodataloaders.class_from_lists" class="nav-link" data-scroll-target="#biodataloaders.class_from_lists">BioDataLoaders.class_from_lists</a>
  <ul class="collapse">
  <li><a href="#example-train-a-model-with-configuration-from-a-yaml-file-loading-the-data-from-the-yaml-file-too" id="toc-example-train-a-model-with-configuration-from-a-yaml-file-loading-the-data-from-the-yaml-file-too" class="nav-link" data-scroll-target="#example-train-a-model-with-configuration-from-a-yaml-file-loading-the-data-from-the-yaml-file-too">Example: train a model with configuration from a YAML file loading the data from the YAML file too</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-getters" id="toc-data-getters" class="nav-link" data-scroll-target="#data-getters">Data getters</a>
  <ul>
  <li><a href="#get_gt" id="toc-get_gt" class="nav-link" data-scroll-target="#get_gt">get_gt</a></li>
  <li><a href="#get_target" id="toc-get_target" class="nav-link" data-scroll-target="#get_target">get_target</a></li>
  <li><a href="#get_noisy_pair" id="toc-get_noisy_pair" class="nav-link" data-scroll-target="#get_noisy_pair">get_noisy_pair</a></li>
  </ul></li>
  <li><a href="#data-display" id="toc-data-display" class="nav-link" data-scroll-target="#data-display">Data Display</a>
  <ul>
  <li><a href="#show_batch" id="toc-show_batch" class="nav-link" data-scroll-target="#show_batch">show_batch</a></li>
  <li><a href="#show_results" id="toc-show_results" class="nav-link" data-scroll-target="#show_results">show_results</a></li>
  </ul></li>
  <li><a href="#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing">Preprocessing</a>
  <ul>
  <li><a href="#extract_patches" id="toc-extract_patches" class="nav-link" data-scroll-target="#extract_patches">extract_patches</a></li>
  <li><a href="#save_patches_grid" id="toc-save_patches_grid" class="nav-link" data-scroll-target="#save_patches_grid">save_patches_grid</a></li>
  <li><a href="#extract_random_patches" id="toc-extract_random_patches" class="nav-link" data-scroll-target="#extract_random_patches">extract_random_patches</a></li>
  <li><a href="#save_patches_random" id="toc-save_patches_random" class="nav-link" data-scroll-target="#save_patches_random">save_patches_random</a></li>
  <li><a href="#dict2string" id="toc-dict2string" class="nav-link" data-scroll-target="#dict2string">dict2string</a></li>
  <li><a href="#remove_singleton_dims" id="toc-remove_singleton_dims" class="nav-link" data-scroll-target="#remove_singleton_dims">remove_singleton_dims</a></li>
  <li><a href="#extract_substacks" id="toc-extract_substacks" class="nav-link" data-scroll-target="#extract_substacks">extract_substacks</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/deepCLEM/bioMONAI/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data</h1>
</div>

<div>
  <div class="description">
    Data classes and functions
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<script src="https://static.cloudflareinsights.com/beacon.min.js?token=62f27bdcb8964407a52676798db9edfa" defer=""></script>
<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="data-types" class="level2">
<h2 class="anchored" data-anchor-id="data-types">Data types</h2>
<p>The module introduces specialized classes to represent various bioimaging data structures, facilitating seamless integration with machine learning workflows.</p>
<hr>
<section id="metaresolver" class="level3">
<h3 class="anchored" data-anchor-id="metaresolver">MetaResolver</h3>
<blockquote class="blockquote">
<pre><code> MetaResolver (*args, **kwargs)</code></pre>
</blockquote>
<p>The <code>MetaResolver</code> class addresses metaclass conflicts, ensuring compatibility across different data structures. This is particularly useful when integrating with libraries that have specific metaclass requirements.</p>
<hr>
</section>
<section id="bioimagebase" class="level3">
<h3 class="anchored" data-anchor-id="bioimagebase">BioImageBase</h3>
<blockquote class="blockquote">
<pre><code> BioImageBase (*args, **kwargs)</code></pre>
</blockquote>
<p>Serving as the foundational class for bioimaging data, <code>BioImageBase</code> provides core functionalities for image handling. It ensures that instances of specified types are appropriately cast to this class, maintaining consistency in data representation.</p>
<p>Metaclass casts <code>x</code> to this class if it is of type <code>cls._bypass_type</code>.</p>
<hr>
</section>
<section id="bioimage" class="level3">
<h3 class="anchored" data-anchor-id="bioimage">BioImage</h3>
<blockquote class="blockquote">
<pre><code> BioImage (*args, **kwargs)</code></pre>
</blockquote>
<p>A subclass of <code>BioImageBase</code>, the <code>BioImage</code> class is tailored for handling both 2D and 3D image objects. It offers methods to load images from various formats and provides access to image properties such as shape and dimensions.</p>
<div id="cell-7" class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> BioImage.create(<span class="st">'./data_examples/example_tiff.tiff'</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>torch.Size([1, 96, 512, 512])</code></pre>
</div>
</div>
<hr>
</section>
<section id="bioimagestack" class="level3">
<h3 class="anchored" data-anchor-id="bioimagestack">BioImageStack</h3>
<blockquote class="blockquote">
<pre><code> BioImageStack (*args, **kwargs)</code></pre>
</blockquote>
<p>Designed for 3D image data, <code>BioImageStack</code> extends <code>BioImageBase</code> to manage volumetric images effectively. It includes functionalities for slicing, visualization, and manipulation of 3D data.</p>
<div id="cell-9" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> BioImageStack.create(<span class="st">'./data_examples/example_tiff.tiff'</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>torch.Size([1, 96, 512, 512])</code></pre>
</div>
</div>
<hr>
</section>
<section id="bioimageproject" class="level3">
<h3 class="anchored" data-anchor-id="bioimageproject">BioImageProject</h3>
<blockquote class="blockquote">
<pre><code> BioImageProject (*args, **kwargs)</code></pre>
</blockquote>
<p>The <code>BioImageProject</code> class represents a 3D image stack as a 2D image using maximum intensity projection. This is particularly useful for visualizing volumetric data in a 2D format, aiding in quick assessments and presentations.</p>
<div id="cell-11" class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> BioImageProject.create(<span class="st">'./data_examples/example_tiff.tiff'</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>a.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>torch.Size([1, 512, 512])</code></pre>
</div>
</div>
<hr>
</section>
<section id="bioimagemulti" class="level3">
<h3 class="anchored" data-anchor-id="bioimagemulti">BioImageMulti</h3>
<blockquote class="blockquote">
<pre><code> BioImageMulti (*args, **kwargs)</code></pre>
</blockquote>
<p>For multi-channel 2D images, <code>BioImageMulti</code> extends <code>BioImageBase</code> to handle data with multiple channels, such as different fluorescence markers in microscopy images.</p>
<div id="cell-13" class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load a 3D image stack as a multichannel image</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> BioImageMulti.create(<span class="st">'./data_examples/example_tiff.tiff'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Differently from BioImageStack, here the third dimension is encoded as channels.</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>torch.Size([96, 512, 512])</code></pre>
</div>
</div>
</section>
</section>
<section id="data-conversion" class="level2">
<h2 class="anchored" data-anchor-id="data-conversion">Data conversion</h2>
<p>To facilitate seamless integration between tensors and bioimaging data structures, the module provides conversion utilities.</p>
<hr>
<section id="tensor2bioimage" class="level3">
<h3 class="anchored" data-anchor-id="tensor2bioimage">Tensor2BioImage</h3>
<blockquote class="blockquote">
<pre><code> Tensor2BioImage (cls:__main__.BioImageBase=&lt;class
                  '__main__.BioImageStack'&gt;)</code></pre>
</blockquote>
<p>The <code>Tensor2BioImage</code> transform converts tensors into <code>BioImageBase</code> instances, enabling the application of bioimaging-specific methods to tensor data. This is essential for integrating deep learning models with bioimaging workflows.</p>
</section>
</section>
<section id="data-blocks-and-dataloader" class="level2">
<h2 class="anchored" data-anchor-id="data-blocks-and-dataloader">Data Blocks and Dataloader</h2>
<p>The module offers classes to construct data blocks and data loaders, streamlining the preparation of datasets for machine learning models.</p>
<hr>
<section id="bioimageblock" class="level3">
<h3 class="anchored" data-anchor-id="bioimageblock">BioImageBlock</h3>
<blockquote class="blockquote">
<pre><code> BioImageBlock (cls:__main__.BioImageBase=&lt;class '__main__.BioImage'&gt;)</code></pre>
</blockquote>
<p>A <code>TransformBlock</code> tailored for bioimaging data, <code>BioImageBlock</code> facilitates the creation of data processing pipelines, including transformations and augmentations specific to bioimaging.</p>
<hr>
</section>
<section id="biodatablock" class="level3">
<h3 class="anchored" data-anchor-id="biodatablock">BioDataBlock</h3>
<blockquote class="blockquote">
<pre><code> BioDataBlock (blocks:list=(&lt;fastai.data.block.TransformBlock object at
               0x7fdfd48070d0&gt;, &lt;fastai.data.block.TransformBlock object
               at 0x7fdfd4807410&gt;), dl_type:fastai.data.core.TfmdDL=None,
               get_items=&lt;function get_image_files&gt;, get_y=None,
               get_x=None, getters:list=None, n_inp:int=None,
               item_tfms:list=None, batch_tfms:list=None, **kwargs)</code></pre>
</blockquote>
<p>The <code>BioDataBlock</code> class serves as a generic container to build <code>Datasets</code> and <code>DataLoaders</code> efficiently. It integrates item and batch transformations, getters, and splitters, simplifying the setup of data pipelines for training and validation.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>blocks</td>
<td>list</td>
<td>(&lt;fastai.data.block.TransformBlock object at 0x7fdfd48070d0&gt;, &lt;fastai.data.block.TransformBlock object at 0x7fdfd4807410&gt;)</td>
<td>One or more <code>TransformBlock</code>s</td>
</tr>
<tr class="even">
<td>dl_type</td>
<td>TfmdDL</td>
<td>None</td>
<td>Task specific <code>TfmdDL</code>, defaults to <code>block</code>’s dl_type or<code>TfmdDL</code></td>
</tr>
<tr class="odd">
<td>get_items</td>
<td>function</td>
<td>get_image_files</td>
<td></td>
</tr>
<tr class="even">
<td>get_y</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>get_x</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>getters</td>
<td>list</td>
<td>None</td>
<td>Getter functions applied to results of <code>get_items</code></td>
</tr>
<tr class="odd">
<td>n_inp</td>
<td>int</td>
<td>None</td>
<td>Number of inputs</td>
</tr>
<tr class="even">
<td>item_tfms</td>
<td>list</td>
<td>None</td>
<td><code>ItemTransform</code>s, applied on an item</td>
</tr>
<tr class="odd">
<td>batch_tfms</td>
<td>list</td>
<td>None</td>
<td><code>Transform</code>s or <code>RandTransform</code>s, applied by batch</td>
</tr>
<tr class="even">
<td>kwargs</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders">BioDataLoaders</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders (*loaders, path:str|pathlib.Path='.', device=None)</code></pre>
</blockquote>
<p>Basic wrapper around several <code>DataLoader</code>s with factory methods for biomedical imaging problems. Managing multiple <code>DataLoader</code> instances, <code>BioDataLoaders</code> handles data loading for different phases of model training, such as training, validation, and testing. It ensures efficient data handling and supports various batch processing strategies.</p>
<hr>
</section>
<section id="biodataloaders.from_source" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.from_source">BioDataLoaders.from_source</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.from_source (data_source, show_summary:bool=False,
                             path:str|Path='.', bs:int=64,
                             val_bs:int=None, shuffle:bool=True,
                             device=None)</code></pre>
</blockquote>
<p>Create and return a DataLoader from a BioDataBlock using provided keyword arguments.</p>
<p>Returns a DataLoader: A PyTorch DataLoader object populated with the data from the BioDataBlock. If show_summary is True, it also prints a summary of the datablock after creation.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data_source</td>
<td></td>
<td></td>
<td>The source of the data to be loaded by the dataloader. This can be any type that is compatible with the dataloading method specified in kwargs (e.g., paths, datasets).</td>
</tr>
<tr class="even">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="odd">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="even">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="odd">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.from_folder" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.from_folder">BioDataLoaders.from_folder</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.from_folder (path, get_target_fn, train='train',
                             valid='valid', valid_pct=None, seed=None,
                             item_tfms=None, batch_tfms=None,
                             img_cls=&lt;class '__main__.BioImage'&gt;,
                             target_img_cls=&lt;class '__main__.BioImage'&gt;,
                             show_summary:bool=False, bs:int=64,
                             val_bs:int=None, shuffle:bool=True,
                             device=None)</code></pre>
</blockquote>
<p>Create from dataset in <code>path</code> with <code>train</code> and <code>valid</code> subfolders (or provide <code>valid_pct</code>)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>get_target_fn</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>train</td>
<td>str</td>
<td>train</td>
<td></td>
</tr>
<tr class="even">
<td>valid</td>
<td>str</td>
<td>valid</td>
<td></td>
</tr>
<tr class="odd">
<td>valid_pct</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>target_img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="odd">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="even">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="odd">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="even">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="odd">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.from_df" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.from_df">BioDataLoaders.from_df</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.from_df (df, path='.', valid_pct=0.2, seed=None, fn_col=0,
                         folder=None, pref=None, suff='', target_col=1,
                         target_folder=None, target_suff='',
                         valid_col=None, item_tfms=None, batch_tfms=None,
                         img_cls=&lt;class '__main__.BioImage'&gt;,
                         target_img_cls=&lt;class '__main__.BioImage'&gt;,
                         show_summary:bool=False, bs:int=64,
                         val_bs:int=None, shuffle:bool=True, device=None)</code></pre>
</blockquote>
<p>Create from <code>df</code> using <code>fn_col</code> and <code>target_col</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="odd">
<td>valid_pct</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="even">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>fn_col</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="even">
<td>folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>pref</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>target_col</td>
<td>int</td>
<td>1</td>
<td></td>
</tr>
<tr class="even">
<td>target_folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>target_suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>valid_col</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>target_img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="odd">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="even">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="odd">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="even">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="odd">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.from_csv" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.from_csv">BioDataLoaders.from_csv</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.from_csv (path, csv_fname='train.csv', header='path',
                          delimiter=None, quoting=0, valid_pct=0.2,
                          seed=None, fn_col=0, folder=None, pref=None,
                          suff='', target_col=1, target_folder=None,
                          target_suff='', valid_col=None, item_tfms=None,
                          batch_tfms=None, img_cls=&lt;class
                          '__main__.BioImage'&gt;, target_img_cls=&lt;class
                          '__main__.BioImage'&gt;, show_summary:bool=False,
                          bs:int=64, val_bs:int=None, shuffle:bool=True,
                          device=None)</code></pre>
</blockquote>
<p>Create from <code>path/csv_fname</code> using <code>fn_col</code> and <code>target_col</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>csv_fname</td>
<td>str</td>
<td>train.csv</td>
<td></td>
</tr>
<tr class="odd">
<td>header</td>
<td>str</td>
<td>path</td>
<td></td>
</tr>
<tr class="even">
<td>delimiter</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>quoting</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="even">
<td>valid_pct</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="odd">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>fn_col</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="odd">
<td>folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>pref</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>target_col</td>
<td>int</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>target_folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>target_suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>valid_col</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="odd">
<td>target_img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="odd">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="even">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="odd">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="even">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.class_from_folder" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.class_from_folder">BioDataLoaders.class_from_folder</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.class_from_folder (path, train='train', valid='valid',
                                   valid_pct=None, seed=None, vocab=None,
                                   item_tfms=None, batch_tfms=None,
                                   img_cls=&lt;class '__main__.BioImage'&gt;,
                                   show_summary:bool=False, bs:int=64,
                                   val_bs:int=None, shuffle:bool=True,
                                   device=None)</code></pre>
</blockquote>
<p>Create from dataset in <code>path</code> with <code>train</code> and <code>valid</code> subfolders (or provide <code>valid_pct</code>)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>train</td>
<td>str</td>
<td>train</td>
<td></td>
</tr>
<tr class="odd">
<td>valid</td>
<td>str</td>
<td>valid</td>
<td></td>
</tr>
<tr class="even">
<td>valid_pct</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>vocab</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="odd">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="even">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="odd">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="even">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.class_from_df" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.class_from_df">BioDataLoaders.class_from_df</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.class_from_df (df, path='.', valid_pct=0.2, seed=None,
                               fn_col=0, folder=None, suff='',
                               label_col=1, label_delim=None,
                               y_block=None, valid_col=None,
                               item_tfms=None, batch_tfms=None,
                               img_cls=&lt;class '__main__.BioImage'&gt;,
                               show_summary:bool=False, bs:int=64,
                               val_bs:int=None, shuffle:bool=True,
                               device=None)</code></pre>
</blockquote>
<p>Create from <code>df</code> using <code>fn_col</code> and <code>label_col</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="odd">
<td>valid_pct</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="even">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>fn_col</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="even">
<td>folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>label_col</td>
<td>int</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>label_delim</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>y_block</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>valid_col</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="odd">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="even">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="odd">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="even">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="odd">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.class_from_csv" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.class_from_csv">BioDataLoaders.class_from_csv</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.class_from_csv (path, csv_fname='labels.csv',
                                header='infer', delimiter=None, quoting=0,
                                valid_pct=0.2, seed=None, fn_col=0,
                                folder=None, suff='', label_col=1,
                                label_delim=None, y_block=None,
                                valid_col=None, item_tfms=None,
                                batch_tfms=None, img_cls=&lt;class
                                '__main__.BioImage'&gt;,
                                show_summary:bool=False, bs:int=64,
                                val_bs:int=None, shuffle:bool=True,
                                device=None)</code></pre>
</blockquote>
<p>Create from <code>path/csv_fname</code> using <code>fn_col</code> and <code>label_col</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>csv_fname</td>
<td>str</td>
<td>labels.csv</td>
<td></td>
</tr>
<tr class="odd">
<td>header</td>
<td>str</td>
<td>infer</td>
<td></td>
</tr>
<tr class="even">
<td>delimiter</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>quoting</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="even">
<td>valid_pct</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="odd">
<td>seed</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>fn_col</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="odd">
<td>folder</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>suff</td>
<td>str</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>label_col</td>
<td>int</td>
<td>1</td>
<td></td>
</tr>
<tr class="even">
<td>label_delim</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>y_block</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>valid_col</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="odd">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="even">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="odd">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="even">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="biodataloaders.class_from_lists" class="level3">
<h3 class="anchored" data-anchor-id="biodataloaders.class_from_lists">BioDataLoaders.class_from_lists</h3>
<blockquote class="blockquote">
<pre><code> BioDataLoaders.class_from_lists (path, fnames, labels, valid_pct=0.2,
                                  seed:int=None, y_block=None,
                                  item_tfms=None, batch_tfms=None,
                                  img_cls=&lt;class '__main__.BioImage'&gt;,
                                  show_summary:bool=False, bs:int=64,
                                  val_bs:int=None, shuffle:bool=True,
                                  device=None)</code></pre>
</blockquote>
<p>Create from list of <code>fnames</code> and <code>labels</code> in <code>path</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str | pathlib.Path</td>
<td>.</td>
<td>Path to put in <code>DataLoaders</code></td>
</tr>
<tr class="even">
<td>fnames</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>labels</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>valid_pct</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="odd">
<td>seed</td>
<td>int</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>y_block</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>item_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>batch_tfms</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>img_cls</td>
<td>MetaResolver</td>
<td>BioImage</td>
<td></td>
</tr>
<tr class="even">
<td>show_summary</td>
<td>bool</td>
<td>False</td>
<td>If True, print a summary of the BioDataBlock after creation.</td>
</tr>
<tr class="odd">
<td>bs</td>
<td>int</td>
<td>64</td>
<td>Size of batch</td>
</tr>
<tr class="even">
<td>val_bs</td>
<td>int</td>
<td>None</td>
<td>Size of batch for validation <code>DataLoader</code></td>
</tr>
<tr class="odd">
<td>shuffle</td>
<td>bool</td>
<td>True</td>
<td>Whether to shuffle data</td>
</tr>
<tr class="even">
<td>device</td>
<td>NoneType</td>
<td>None</td>
<td>Device to put <code>DataLoaders</code></td>
</tr>
</tbody>
</table>
<section id="example-train-a-model-with-configuration-from-a-yaml-file-loading-the-data-from-the-yaml-file-too" class="level4">
<h4 class="anchored" data-anchor-id="example-train-a-model-with-configuration-from-a-yaml-file-loading-the-data-from-the-yaml-file-too">Example: train a model with configuration from a YAML file loading the data from the YAML file too</h4>
<div id="cell-31" class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># image_path = '../_data'</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># batch_size = 32</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># path = Path(image_path)/'bloodmnist'</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># path_train = path/'train'</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># path_val = path/'val'</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # Path to the YAML configuration file</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># yaml_path = './data_examples/sample_config.yml'</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co"># # Create BioDataLoaders instance from YAML with optional overrides</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># dataloaders = BioDataLoaders.from_yaml(</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     path,</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     yaml_path,</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     show_summary = False</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co"># model = SEResNet50(spatial_dims=2,</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co">#                    in_channels=3,   </span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="co">#                    num_classes=8)    </span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co"># # Define the trainer and load the data from the yaml file </span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="co"># trainer = fastTrainer.from_yaml(dataloaders, model, yaml_path)</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="co"># # Train the model</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="co"># trainer.fit(1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="data-getters" class="level2">
<h2 class="anchored" data-anchor-id="data-getters">Data getters</h2>
<p>Functions to retrieve specific data components are provided, aiding in the organization and preprocessing of datasets.</p>
<hr>
<section id="get_gt" class="level3">
<h3 class="anchored" data-anchor-id="get_gt">get_gt</h3>
<blockquote class="blockquote">
<pre><code> get_gt (path_gt, gt_file_name='avg50.png')</code></pre>
</blockquote>
<p>The <code>get_gt</code> function retrieves ground truth data, essential for supervised learning tasks. It ensures that the correct labels or annotations are associated with each data sample.</p>
<p>This function constructs a path to a ground truth file based on the given <code>path_gt</code> and <code>gt_file_name</code>.<br>
It uses a lambda function to create a new path by appending <code>gt_file_name</code> to the parent directory of the input file, as specified by <code>path_gt</code>.</p>
<p>Returns a callable: A function that takes a single argument (a filename) and returns a Path object representing the full path to the ground truth file. When called with a filename, this function constructs the path by combining <code>path_gt</code> or the parent directory of the filename with <code>gt_file_name</code>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path_gt</td>
<td></td>
<td></td>
<td>The base directory where the ground truth files are stored, or a file path from which to derive the parent directory.</td>
</tr>
<tr class="even">
<td>gt_file_name</td>
<td>str</td>
<td>avg50.png</td>
<td>The name of the ground truth file.</td>
</tr>
</tbody>
</table>
<p>Similar to <code>get_gt</code>, the <code>get_target</code> function fetches target data for training, validation, or testing, facilitating the preparation of datasets for machine learning models.</p>
<hr>
</section>
<section id="get_target" class="level3">
<h3 class="anchored" data-anchor-id="get_target">get_target</h3>
<blockquote class="blockquote">
<pre><code> get_target (path:str, same_filename=True, target_file_prefix='target',
             signal_file_prefix='signal', relative_path=False)</code></pre>
</blockquote>
<p>Constructs and returns functions for generating file paths to “target” files based on given input parameters.</p>
<p>This function defines two nested helper functions within its scope:</p>
<pre><code>- `construct_target_filename(file_name)`: Constructs a target file name by inserting the specified prefix into the original file name.
- `generate_target_path(file_name)`: Generates a path to the target file based on whether `same_filename` is set to True or False.</code></pre>
<p>The main function returns the appropriate helper function based on the value of <code>same_filename</code>.</p>
<p>Returns a callable: A function that takes a file name as input and returns its corresponding target file path based on the specified parameters.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>path</td>
<td>str</td>
<td></td>
<td>The base directory where the files are located. This should be a string representing an absolute or relative path.</td>
</tr>
<tr class="even">
<td>same_filename</td>
<td>bool</td>
<td>True</td>
<td>If True, the target file name will match the original file name; otherwise, it will use the specified prefix.</td>
</tr>
<tr class="odd">
<td>target_file_prefix</td>
<td>str</td>
<td>target</td>
<td>The prefix to insert into the target file name if <code>same_filename</code> is False.</td>
</tr>
<tr class="even">
<td>signal_file_prefix</td>
<td>str</td>
<td>signal</td>
<td>The prefix used in the original file names that should be replaced by the target prefix.</td>
</tr>
<tr class="odd">
<td>relative_path</td>
<td>bool</td>
<td>False</td>
<td>If True, it indicates that the path is relative to the parent folder in the path where the input files are located.</td>
</tr>
</tbody>
</table>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_target(<span class="st">'train_folder/target'</span>, same_filename<span class="op">=</span><span class="va">False</span>)(<span class="st">'../signal/signal01.tif'</span>))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_target(<span class="st">'target'</span>, relative_path<span class="op">=</span><span class="va">True</span>)(<span class="st">'../train_folder/signal/image01.tif'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>train_folder/target/target01.tif
../train_folder/target/image01.tif</code></pre>
</div>
</div>
<div id="cell-37" class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_target(<span class="st">'GT'</span>, relative_path<span class="op">=</span><span class="va">True</span>, same_filename<span class="op">=</span><span class="va">False</span>, target_file_prefix<span class="op">=</span><span class="st">"image_clean"</span>, signal_file_prefix<span class="op">=</span><span class="st">"image_noisy"</span>)(<span class="st">'train_folder/signal/image_noisy.tif'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>train_folder/GT/image_clean.tif</code></pre>
</div>
</div>
<p>For tasks involving denoising or noise analysis, <code>get_noisy_pair</code> retrieves pairs of clean and noisy data, enabling the training of models to learn noise reduction.</p>
<hr>
</section>
<section id="get_noisy_pair" class="level3">
<h3 class="anchored" data-anchor-id="get_noisy_pair">get_noisy_pair</h3>
<blockquote class="blockquote">
<pre><code> get_noisy_pair (fn)</code></pre>
</blockquote>
<p>Get another “noisy” version of the input file by selecting a file from the same directory.</p>
<p>This function first retrieves all image files in the directory of the input file <code>fn</code> (excluding subdirectories). It then selects one of these files at random, ensuring that it is not the original file itself to avoid creating a trivial “noisy” pair.</p>
<p>Parameters:</p>
<pre><code>fn (Path or str): The path to the original image file. This should be a Path object but accepts string inputs for convenience.</code></pre>
<p>Returns:</p>
<pre><code>Path: A Path object pointing to the selected noisy file.</code></pre>
</section>
</section>
<section id="data-display" class="level2">
<h2 class="anchored" data-anchor-id="data-display">Data Display</h2>
<p>Visualization functions are included to display batches of data and model results, aiding in qualitative assessments and debugging.</p>
<section id="show_batch" class="level3">
<h3 class="anchored" data-anchor-id="show_batch">show_batch</h3>
<blockquote class="blockquote">
<pre><code>show_batch (x:BioImageBase, y:BioImageBase, samples,
            ctxs=None, max_n:int=10, nrows:int=None, ncols:int=None,
            figsize:tuple=None, **kwargs)</code></pre>
</blockquote>
<p>The <code>show_batch</code> function visualizes a batch of data samples, allowing users to inspect the input data and verify preprocessing steps.</p>
<p>Returns: List[Context]: A list of contexts after displaying the images and labels.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 13%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>BioImageBase</td>
<td></td>
<td>The input image data.</td>
</tr>
<tr class="even">
<td>y</td>
<td>BioImageBase</td>
<td></td>
<td>The target label data.</td>
</tr>
<tr class="odd">
<td>samples</td>
<td></td>
<td></td>
<td>List of sample indices to display.</td>
</tr>
<tr class="even">
<td>ctxs</td>
<td>NoneType</td>
<td></td>
<td>List of contexts for displaying images. If None, create new ones using <code>get_grid()</code>.</td>
</tr>
<tr class="odd">
<td>max_n</td>
<td>int</td>
<td>10</td>
<td>Maximum number of samples to display.</td>
</tr>
<tr class="even">
<td>nrows</td>
<td>int</td>
<td>None</td>
<td>Number of rows in the grid if <code>ctxs</code> are not provided.</td>
</tr>
<tr class="odd">
<td>ncols</td>
<td>int</td>
<td>None</td>
<td>Number of columns in the grid if <code>ctxs</code> are not provided.</td>
</tr>
<tr class="even">
<td>figsize</td>
<td>tuple</td>
<td>None</td>
<td>Figure size for the image display.</td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td></td>
<td></td>
<td>Additional keyword arguments.</td>
</tr>
</tbody>
</table>
</section>
<section id="show_results" class="level3">
<h3 class="anchored" data-anchor-id="show_results">show_results</h3>
<blockquote class="blockquote">
<pre><code>show_results (x: BioImageBase, y: BioImageBase, samples,
              outs, ctxs=None, max_n=10, figsize=None, **kwargs)</code></pre>
</blockquote>
<p>After model inference, <code>show_results</code> displays the model’s predictions alongside the ground truth, facilitating the evaluation of model performance.</p>
<p>Returns:</p>
<p>List[Context]: A list of contexts after displaying the images and labels.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 13%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>BioImageBase</td>
<td></td>
<td>The input image data.</td>
</tr>
<tr class="even">
<td>y</td>
<td>BioImageBase</td>
<td></td>
<td>The target label data.</td>
</tr>
<tr class="odd">
<td>samples</td>
<td></td>
<td></td>
<td>List of sample indices to display.</td>
</tr>
<tr class="even">
<td>outs</td>
<td></td>
<td></td>
<td>List of output predictions corresponding to the samples.</td>
</tr>
<tr class="odd">
<td>ctxs</td>
<td>NoneType</td>
<td></td>
<td>List of contexts for displaying images. If None, create new ones using <code>get_grid()</code>.</td>
</tr>
<tr class="even">
<td>max_n</td>
<td>int</td>
<td>10</td>
<td></td>
</tr>
<tr class="odd">
<td>figsize</td>
<td>tuple</td>
<td>None</td>
<td>Figure size for the image display.</td>
</tr>
<tr class="even">
<td>kwargs</td>
<td></td>
<td></td>
<td>Additional keyword arguments.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="preprocessing" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing">Preprocessing</h2>
<p>The module provides functions for data preprocessing, including patch extraction and dimensionality reduction, essential for preparing data for machine learning models.</p>
<hr>
<section id="extract_patches" class="level3">
<h3 class="anchored" data-anchor-id="extract_patches">extract_patches</h3>
<blockquote class="blockquote">
<pre><code> extract_patches (data, patch_size, overlap)</code></pre>
</blockquote>
<p>Extracts n-dimensional patches from the input data.</p>
<p>Returns: - A list of patches as numpy arrays.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>numpy array of the input data (n-dimensional).</td>
</tr>
<tr class="even">
<td>patch_size</td>
<td>tuple of integers defining the size of the patches in each dimension.</td>
</tr>
<tr class="odd">
<td>overlap</td>
<td>float (between 0 and 1) indicating overlap between patches.</td>
</tr>
</tbody>
</table>
<p>The <code>extract_patches</code> function divides images into smaller patches, which is useful for training models on localized regions of interest, especially when dealing with high-resolution images.</p>
<div id="cell-52" class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.random.rand(<span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">3</span>)  <span class="co"># Example 3D data</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>patch_size <span class="op">=</span> (<span class="dv">64</span>,<span class="dv">64</span>,<span class="dv">2</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>overlap <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>patches <span class="op">=</span> extract_patches(data, patch_size, overlap)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Number of generated patches:"</span>, <span class="bu">len</span>(patches))</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>patches[<span class="dv">0</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of generated patches: 8</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>(64, 64, 2)</code></pre>
</div>
</div>
<hr>
</section>
<section id="save_patches_grid" class="level3">
<h3 class="anchored" data-anchor-id="save_patches_grid">save_patches_grid</h3>
<blockquote class="blockquote">
<pre><code> save_patches_grid (data_folder, gt_folder, output_folder, patch_size,
                    overlap, threshold=None, squeeze_input=True,
                    squeeze_patches=False, csv_output=True,
                    train_test_split_ratio=0.8, tfms_before:List=None,
                    tfms_after:List=None)</code></pre>
</blockquote>
<p>Loads n-dimensional data from data_folder and gt_folder, generates patches, and saves them into individual HDF5 files. Each HDF5 file will have datasets with the structure X/patch_idx and y/patch_idx.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data_folder</td>
<td></td>
<td></td>
<td>Path to the folder containing data files (n-dimensional data).</td>
</tr>
<tr class="even">
<td>gt_folder</td>
<td></td>
<td></td>
<td>Path to the folder containing ground truth (gt) files (n-dimensional data).</td>
</tr>
<tr class="odd">
<td>output_folder</td>
<td></td>
<td></td>
<td>Path to the folder where the HDF5 files will be saved.</td>
</tr>
<tr class="even">
<td>patch_size</td>
<td></td>
<td></td>
<td>tuple of integers defining the size of the patches.</td>
</tr>
<tr class="odd">
<td>overlap</td>
<td></td>
<td></td>
<td>float (between 0 and 1) defining the overlap between patches.</td>
</tr>
<tr class="even">
<td>threshold</td>
<td>NoneType</td>
<td>None</td>
<td>If provided, patches with a mean value below this threshold will be discarded.</td>
</tr>
<tr class="odd">
<td>squeeze_input</td>
<td>bool</td>
<td>True</td>
<td>If True, squeeze the input data to remove single-dimensional entries.</td>
</tr>
<tr class="even">
<td>squeeze_patches</td>
<td>bool</td>
<td>False</td>
<td>If True, squeeze the patches to remove single-dimensional entries.</td>
</tr>
<tr class="odd">
<td>csv_output</td>
<td>bool</td>
<td>True</td>
<td>If True, a CSV file listing all patch paths is created.</td>
</tr>
<tr class="even">
<td>train_test_split_ratio</td>
<td>float</td>
<td>0.8</td>
<td>Ratio of data to split into train and test CSV files (e.g., 0.8 for 80% train).</td>
</tr>
<tr class="odd">
<td>tfms_before</td>
<td>List</td>
<td>None</td>
<td>List of transforms to apply before extracting patches.</td>
</tr>
<tr class="even">
<td>tfms_after</td>
<td>List</td>
<td>None</td>
<td>List of transforms to apply after extracting patches.</td>
</tr>
</tbody>
</table>
<p>After extracting patches, <code>save_patches_grid</code> saves them in a grid format, facilitating visualization and inspection of the patches.</p>
<div id="cell-55" class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bioMONAI.transforms <span class="im">import</span> Blur</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-56" class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data_folder <span class="op">=</span> <span class="st">'./data_examples/Confocal_BPAE_B'</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For the sake of simplicity, in this example we use the same folder for ground truth</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>gt_folder <span class="op">=</span> <span class="st">'./data_examples/Confocal_BPAE_B'</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>output_folder <span class="op">=</span> <span class="st">'./_test'</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>patch_size <span class="op">=</span> (<span class="dv">64</span>,<span class="dv">64</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>overlap <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>save_patches_grid(data_folder, gt_folder, output_folder, patch_size, overlap, squeeze_input<span class="op">=</span><span class="va">True</span>, tfms_after<span class="op">=</span>[Blur(ksize<span class="op">=</span><span class="dv">15</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Processing files: 100%|██████████| 2/2 [00:00&lt;00:00, 26.92it/s]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CSV files saved to: ./_test/train_patches.csv and ./_test/test_patches.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
</div>
<div id="cell-57" class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bioMONAI.io <span class="im">import</span> hdf5_reader, split_hdf_path</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bioMONAI.visualize <span class="im">import</span> plot_image</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-58" class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'./_test/HV110_P0500510000.h5/X/1'</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>im , _ <span class="op">=</span> hdf5_reader()(file_path)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>plot_image(im)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_data_files/figure-html/cell-40-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-59" class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'./_test/HV110_P0500510000.h5/y/1'</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>im , _ <span class="op">=</span> hdf5_reader()(file_path)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>plot_image(im)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_data_files/figure-html/cell-41-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="extract_random_patches" class="level3">
<h3 class="anchored" data-anchor-id="extract_random_patches">extract_random_patches</h3>
<blockquote class="blockquote">
<pre><code> extract_random_patches (data_tuple, patch_size, num_patches)</code></pre>
</blockquote>
<p>Extracts a specified number of random n-dimensional patches from the input data and ground truth data.</p>
<p>Returns: - A tuple of lists containing randomly cropped patches as numpy arrays (input_patches, gt_patches).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data_tuple</td>
<td>tuple of numpy arrays (input data, ground truth data).</td>
</tr>
<tr class="even">
<td>patch_size</td>
<td>tuple of integers defining the size of the patches in each dimension.</td>
</tr>
<tr class="odd">
<td>num_patches</td>
<td>number of random patches to extract.</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="save_patches_random" class="level3">
<h3 class="anchored" data-anchor-id="save_patches_random">save_patches_random</h3>
<blockquote class="blockquote">
<pre><code> save_patches_random (data_folder, gt_folder, output_folder, patch_size,
                      num_patches, threshold=None, squeeze_input=True,
                      squeeze_patches=False, csv_output=True,
                      train_test_split_ratio=0.8, tfms_before:List=None,
                      tfms_after:List=None)</code></pre>
</blockquote>
<p>Loads n-dimensional data from data_folder and gt_folder, generates random patches, and saves them into individual HDF5 files. Each HDF5 file will have datasets with the structure X/patch_idx and y/patch_idx.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data_folder</td>
<td></td>
<td></td>
<td>Path to the folder containing data files (n-dimensional data).</td>
</tr>
<tr class="even">
<td>gt_folder</td>
<td></td>
<td></td>
<td>Path to the folder containing ground truth (gt) files (n-dimensional data).</td>
</tr>
<tr class="odd">
<td>output_folder</td>
<td></td>
<td></td>
<td>Path to the folder where the HDF5 files will be saved.</td>
</tr>
<tr class="even">
<td>patch_size</td>
<td></td>
<td></td>
<td>tuple of integers defining the size of the patches.</td>
</tr>
<tr class="odd">
<td>num_patches</td>
<td></td>
<td></td>
<td>number of random patches to extract per file.</td>
</tr>
<tr class="even">
<td>threshold</td>
<td>NoneType</td>
<td>None</td>
<td>If provided, patches with a mean value below this threshold will be discarded.</td>
</tr>
<tr class="odd">
<td>squeeze_input</td>
<td>bool</td>
<td>True</td>
<td>If True, squeezes singleton dimensions in the input data.</td>
</tr>
<tr class="even">
<td>squeeze_patches</td>
<td>bool</td>
<td>False</td>
<td>If True, squeezes singleton dimensions in the patches.</td>
</tr>
<tr class="odd">
<td>csv_output</td>
<td>bool</td>
<td>True</td>
<td>If True, a CSV file listing all patch paths is created.</td>
</tr>
<tr class="even">
<td>train_test_split_ratio</td>
<td>float</td>
<td>0.8</td>
<td>Ratio of data to split into train and test CSV files (e.g., 0.8 for 80% train).</td>
</tr>
<tr class="odd">
<td>tfms_before</td>
<td>List</td>
<td>None</td>
<td>List of transforms to apply before extracting patches.</td>
</tr>
<tr class="even">
<td>tfms_after</td>
<td>List</td>
<td>None</td>
<td>List of transforms to apply after extracting patches.</td>
</tr>
</tbody>
</table>
<div id="cell-62" class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>data_folder <span class="op">=</span> <span class="st">'./data_examples/Confocal_BPAE_B'</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>gt_folder <span class="op">=</span> <span class="st">'./data_examples/Confocal_BPAE_B'</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>output_folder <span class="op">=</span> <span class="st">'./_test2'</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>patch_size <span class="op">=</span> (<span class="dv">64</span>,<span class="dv">64</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>num_patches<span class="op">=</span> <span class="dv">2</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>save_patches_random(data_folder, gt_folder, output_folder, patch_size, num_patches, squeeze_input<span class="op">=</span><span class="va">True</span>, tfms_after<span class="op">=</span>[Blur(ksize<span class="op">=</span><span class="dv">15</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Processing files: 100%|██████████| 2/2 [00:00&lt;00:00, 54.34it/s]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CSV files saved to: ./_test2/train_patches.csv and ./_test2/test_patches.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
</div>
<div id="cell-63" class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'./_test2/HV110_P0500510000_random_patches.h5/X/1'</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>im , _ <span class="op">=</span> hdf5_reader()(file_path)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>plot_image(im)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_data_files/figure-html/cell-45-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-64" class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'./_test2/HV110_P0500510000_random_patches.h5/y/1'</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>im , _ <span class="op">=</span> hdf5_reader()(file_path)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>plot_image(im)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_data_files/figure-html/cell-46-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="dict2string" class="level3">
<h3 class="anchored" data-anchor-id="dict2string">dict2string</h3>
<blockquote class="blockquote">
<pre><code> dict2string (d, item_sep='_', key_value_sep='', pad_zeroes=None)</code></pre>
</blockquote>
<p>Transforms a dictionary into a string with customizable separators and optional zero padding for integers.</p>
<p>Returns the formatted dictionary as a string.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>d</td>
<td></td>
<td></td>
<td>The dictionary to convert.</td>
</tr>
<tr class="even">
<td>item_sep</td>
<td>str</td>
<td>_</td>
<td>The separator between dictionary items (default is “,”).</td>
</tr>
<tr class="odd">
<td>key_value_sep</td>
<td>str</td>
<td></td>
<td>The separator between keys and values (default is “:”).</td>
</tr>
<tr class="even">
<td>pad_zeroes</td>
<td>NoneType</td>
<td>None</td>
<td>The minimum width for integer values, padded with zeros. If None, no padding is applied.</td>
</tr>
</tbody>
</table>
<div id="cell-66" class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>my_dict <span class="op">=</span> {<span class="st">'C'</span>: <span class="dv">2</span>, <span class="st">'Z'</span>: <span class="dv">30</span>, <span class="st">'S'</span>: <span class="dv">1</span>}</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> dict2string(my_dict, pad_zeroes<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>C002_Z030_S001</code></pre>
</div>
</div>
<hr>
</section>
<section id="remove_singleton_dims" class="level3">
<h3 class="anchored" data-anchor-id="remove_singleton_dims">remove_singleton_dims</h3>
<blockquote class="blockquote">
<pre><code> remove_singleton_dims (substack, order)</code></pre>
</blockquote>
<p>Remove dimensions with a size of 1 from both the substack and the order string.</p>
<p>Returns:</p>
<pre><code>substack (np.array): The substack with singleton dimensions removed.
new_order (str): The updated dimension order string.</code></pre>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>substack</td>
<td>The extracted substack data.</td>
</tr>
<tr class="even">
<td>order</td>
<td>The dimension order string (e.g., ‘CZYX’).</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="extract_substacks" class="level3">
<h3 class="anchored" data-anchor-id="extract_substacks">extract_substacks</h3>
<blockquote class="blockquote">
<pre><code> extract_substacks (input_file, output_dir=None, indices=None,
                    split_dimension=None, squeeze_dims=True, *kwargs)</code></pre>
</blockquote>
<p>Extract substacks from a multidimensional OME-TIFF stack using AICSImageIO.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>input_file</td>
<td></td>
<td></td>
<td>Path to the input OME-TIFF file.</td>
</tr>
<tr class="even">
<td>output_dir</td>
<td>NoneType</td>
<td>None</td>
<td>Directory to save the extracted substacks. If a list, the substacks will be saved in the corresponding subdirectories from the list.</td>
</tr>
<tr class="odd">
<td>indices</td>
<td>NoneType</td>
<td>None</td>
<td>A dictionary specifying which indices to extract. Keys can include ‘C’ for channel, ‘Z’ for z-slice, ‘T’ for time point, and ‘S’ for scene. If None, all indices are extracted.</td>
</tr>
<tr class="even">
<td>split_dimension</td>
<td>NoneType</td>
<td>None</td>
<td>Dimension to split substacks along. If provided, separate substacks will be generated for each index in the split_dimension. Must be one of the keys in indices.</td>
</tr>
<tr class="odd">
<td>squeeze_dims</td>
<td>bool</td>
<td>True</td>
<td>Dimension to squeeze substacks along.</td>
</tr>
<tr class="even">
<td>kwargs</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="cell-69" class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>output_dir <span class="op">=</span> <span class="st">"./_test_folder/"</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>subdirs <span class="op">=</span> [output_dir <span class="op">+</span> folder <span class="cf">for</span> folder <span class="kw">in</span> [<span class="st">"channel_0"</span>, <span class="st">"channel_1"</span>, <span class="st">"channel_2"</span>]]</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>subdirs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>['./_test_folder/channel_0',
 './_test_folder/channel_1',
 './_test_folder/channel_2']</code></pre>
</div>
</div>
<div id="cell-70" class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>[os.path.join([output_dir][<span class="dv">0</span>], <span class="ss">f"</span><span class="sc">{</span>subdirs[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>ii<span class="sc">}</span><span class="ss">"</span>) <span class="cf">for</span> ii <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>['./_test_folder/./_test_folder/channel_0_0',
 './_test_folder/./_test_folder/channel_0_1']</code></pre>
</div>
</div>
<div id="cell-71" class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>filename <span class="op">=</span> <span class="st">'./data_examples/2155a4fe_3500000635_100X_20170227_E08_P21.ome.tiff'</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This extracts a single substack for channel 0, z-slice 5, and time point 0.</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>extract_substacks(filename, output_dir<span class="op">=</span>output_dir, indices<span class="op">=</span>{<span class="st">"C"</span>: <span class="dv">0</span>, <span class="st">"Z"</span>: <span class="bu">range</span>(<span class="dv">35</span>), <span class="st">"T"</span>: <span class="dv">0</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Extracted substack saved to: ./_test_folder/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C0_Zrange(0, 35)_T0.ome.tiff</code></pre>
</div>
</div>
<div id="cell-72" class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This extracts substacks for each channel (`C`) and saves them in separate subfolders named "C_0", "C_1", "C_2", etc.</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>extract_substacks(filename, output_dir<span class="op">=</span>[output_dir], indices<span class="op">=</span>{<span class="st">"C"</span>: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>], <span class="st">"Z"</span>: <span class="dv">5</span>, <span class="st">"T"</span>: <span class="dv">0</span>}, split_dimension<span class="op">=</span><span class="st">"C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Extracted substack saved to: ./_test_folder/C_0/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C0_Z5_T0.ome.tiff
Extracted substack saved to: ./_test_folder/C_1/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C1_Z5_T0.ome.tiff
Extracted substack saved to: ./_test_folder/C_2/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C2_Z5_T0.ome.tiff</code></pre>
</div>
</div>
<div id="cell-73" class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This extracts substacks for each channel and saves them in directories "channel_0", "channel_1", and "channel_2".</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>extract_substacks(filename, output_dir<span class="op">=</span>subdirs, indices<span class="op">=</span>{<span class="st">"C"</span>: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>], <span class="st">"Z"</span>: <span class="dv">5</span>}, split_dimension<span class="op">=</span><span class="st">"C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Extracted substack saved to: ./_test_folder/channel_0/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C0_Z5.ome.tiff
Extracted substack saved to: ./_test_folder/channel_1/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C1_Z5.ome.tiff
Extracted substack saved to: ./_test_folder/channel_2/2155a4fe_3500000635_100X_20170227_E08_P21_substack_C2_Z5.ome.tiff</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/deepCLEM\.github\.io\/bioMONAI");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright © 2024 Biagio Mandracchia, MIT License</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/deepCLEM/bioMONAI/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/deepCLEM/bioMONAI/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>